@model IEnumerable<QuanLyGiongChanNuoi.Infrastructure.Models.LichSuTruyCap>

    @{ ViewData["Title"] = "Lịch Sử Truy Cập"; }

    <div class="container mt-4">
        <h3 class="text-danger fw-bold mb-4"><i class="bi bi-clock-history"></i> Tra Cứu Lịch Sử Truy Cập Hệ Thống</h3>

        <div class="card mb-4 bg-light border-0 shadow-sm">
            <div class="card-body">
                <form asp-action="Index" method="get" class="row g-3">
                    <div class="col-md-4">
                        <label class="form-label fw-bold">Tìm theo User</label>
                        <input type="text" name="searchString" class="form-control" value="@ViewData["SearchString"]" placeholder="Nhập tài khoản hoặc họ tên...">
                    </div>
                    <div class="col-md-3">
                        <label class="form-label fw-bold">Từ ngày</label>
                        <input type="date" name="tuNgay" class="form-control" value="@ViewData["TuNgay"]">
                    </div>
                    <div class="col-md-3">
                        <label class="form-label fw-bold">Đến ngày</label>
                        <input type="date" name="denNgay" class="form-control" value="@ViewData["DenNgay"]">
                    </div>
                    <div class="col-md-2 d-flex align-items-end">
                        <button type="submit" class="btn btn-primary w-100"><i class="bi bi-search"></i> Tra cứu</button>
                    </div>
                </form>
            </div>
        </div>

        <div class="card shadow border-0">
            <div class="card-body p-0">
                <table class="table table-hover table-striped mb-0">
                    <thead class="table-dark">
                        <tr>
                            <th>Thời Gian</th>
                            <th>Người Dùng</th>
                            <th>Hành Động</th>
                            <th>IP</th>
                            <th>Trình Duyệt</th>
                        </tr>
                    </thead>
                    <tbody>
                        @if (Model != null && Model.Any())
                    {
                        @foreach (var item in Model)
                        {
                        <tr>
                            <td>@item.ThoiGian?.ToString("dd/MM/yyyy HH:mm:ss")</td>
                            <td class="fw-bold text-primary">
                                <i class="bi bi-person-circle"></i> @(item.NguoiDung?.TenDn ?? "Unknown")
                            </td>
                            <td>@item.HanhDong</td>
                            <td><span class="badge bg-secondary">@item.DiaChiIP</span></td>
                            <td class="text-muted small text-truncate" style="max-width: 200px;" title="@item.TrinhDuyet">
                                @item.TrinhDuyet
                            </td>
                        </tr>
                        }
                    }
                    else
                    {
                        <tr>
                            <td colspan="5" class="text-center py-5 text-muted">Không có dữ liệu lịch sử nào.</td>
                        </tr>
                    }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
